version: 1

filters:
  traceId:
    (): app.config.TraceIdFilter

formatters:
  standard:
    format: "[%(asctime)s] [%(trace)-16s] [%(filename)17s:%(lineno)-4d] [%(levelname)7s] %(message)s"

handlers:
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: standard
    filters: [traceId]
    stream: ext://sys.stdout

  debug_file_handler:
    class: logging.handlers.RotatingFileHandler
    level: DEBUG
    formatter: standard
    filename: ./data/app.log
    maxBytes: 10485760 # 10MB
    backupCount: 5
    encoding: utf8
    filters: [traceId]

root:
  level: DEBUG
  handlers: [console, debug_file_handler]

loggers:
  sampleLogger:
    level: DEBUG
    handlers: [console, debug_file_handler]
    propagate: no
